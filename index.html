<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gojek SI/TI Strategy Dashboard Prototype</title>
    <!-- Load Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load React/ReactDOM (versi produksi, lebih cepat) -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Load Recharts Library for graphics -->
    <script src="https://unpkg.com/recharts/umd/Recharts.min.js"></script>
    <!-- Babel untuk menjalankan JSX (React code) di Browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Custom Styles for better visual consistency */
        body { font-family: 'Inter', sans-serif; }
        .chart-container { width: 100%; height: 220px; }
        .table-container { max-height: 250px; overflow-y: auto; }
        /* Menggunakan kelas 'shadow-lg' dan 'rounded-2xl' untuk tampilan modern Gojek */
    </style>
</head>
<body class="min-h-screen bg-gray-50 text-gray-800 font-sans">

    <div id="root">
        <!-- Pesan loading awal -->
        <div class="p-8 text-center text-lg text-gray-500" id="initial-loading">Memuat Dashboard... Harap tunggu.</div>
    </div>

    <script type="text/babel">
        // Pastikan Recharts sudah tersedia di window scope
        const Recharts = window.Recharts || {}; 

        // Ambil komponen Recharts yang diperlukan
        const { LineChart, Line, XAxis, YAxis, Tooltip, ResponsiveContainer, PieChart, Pie, Cell, Legend } = Recharts;

        // --- Data untuk Dashboard ---
        const kpiData = [
            { id: 1, title: 'Integrasi Layanan', value: '85%', subtitle: 'Unit terhubung ke dashboard' },
            { id: 2, title: 'Downtime Bulanan', value: '0.7%', subtitle: 'Target < 1%' },
            { id: 3, title: 'Akurasi Prediksi', value: '72%', subtitle: 'Target ≥ 20% improvement' },
            { id: 4, title: 'Kepuasan Mitra', value: '78%', subtitle: 'Survei NPS' },
        ];

        const requestsOverTime = [
            { name: 'Jan', requests: 12000 },
            { name: 'Feb', requests: 14500 },
            { name: 'Mar', requests: 16000 },
            { name: 'Apr', requests: 20000 },
            { name: 'May', requests: 22000 },
            { name: 'Jun', requests: 24000 },
        ];

        const partnerData = [
            { id: 'D-001', name: 'Budi', rating: 4.8, city: 'Jakarta', status: 'Aktif' },
            { id: 'D-002', name: 'Sari', rating: 4.6, city: 'Bandung', status: 'Aktif' },
            { id: 'D-003', name: 'Andi', rating: 3.9, city: 'Surabaya', status: 'Onboarding' },
            { id: 'D-004', name: 'Ratna', rating: 4.2, city: 'Semarang', status: 'Aktif' },
        ];

        const incidentData = [
            { name: 'Auth', value: 45 },
            { name: 'Payments', value: 25 },
            { name: 'API Gateway', value: 20 },
            { name: 'Other', value: 10 },
        ];

        const COLORS = ['#4F46E5', '#06B6D4', '#10B981', '#F59E0B'];

        // --- Komponen Utama ---
        function GojekSiTiPrototype() {
            const React = window.React;

            // Komponen untuk Rating Bintang
            const StarRating = ({ rating }) => {
                const fullStars = Math.floor(rating);
                // Menggunakan karakter Unicode Bintang Penuh (★) dan Bintang Kosong (☆)
                const starIcons = '★'.repeat(fullStars) + '☆'.repeat(5 - fullStars);
                return <span className="text-yellow-500">{starIcons}</span>;
            };
            
            // Komponen Placeholder untuk Recharts (Jika Recharts gagal dimuat)
            const ChartPlaceholder = ({ title }) => (
                <div className="flex items-center justify-center h-full bg-gray-100 rounded-xl text-gray-500 p-4">
                    Gagal memuat Grafik ({title}). Cek koneksi CDN atau pastikan Recharts terdefinisi.
                </div>
            );

            // Cek apakah Recharts dimuat
            const isRechartsLoaded = !!LineChart;

            return (
                <div className="min-h-screen bg-gray-50 text-gray-800 font-sans">
                    <header className="bg-white shadow-sm sticky top-0 z-30">
                        <div className="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
                            <div className="flex items-center gap-3">
                                <div className="w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-600 to-cyan-500 flex items-center justify-center text-white font-bold">GJ</div>
                                <div>
                                    <h1 className="text-lg font-semibold">Gojek — SI/TI Strategy Dashboard (B-Vissta Prototype)</h1>
                                    <p className="text-sm text-gray-500">Overview • Enterprise Architecture • Data & Analytics • Partner Management</p>
                                </div>
                            </div>
                            <div className="flex items-center gap-4">
                                <div className="text-sm text-gray-600">Admin • Alfina</div>
                                <button className="px-3 py-1 bg-indigo-600 text-white rounded-md text-sm hover:bg-indigo-700 transition">Export</button>
                            </div>
                        </div>
                    </header>

                    <main className="max-w-7xl mx-auto px-4 py-6 grid grid-cols-12 gap-6">
                        {/* Sidebar */}
                        <aside className="col-span-3 bg-white rounded-2xl p-4 shadow-xl h-fit">
                            <nav className="space-y-2">
                                <div className="font-semibold text-gray-700 mb-2">Navigasi</div>
                                <a href="#" className="block px-3 py-2 rounded-lg bg-indigo-50 text-indigo-700 font-medium">Dashboard</a>
                                <a href="#" className="block px-3 py-2 rounded-lg hover:bg-gray-100 transition">Arsitektur Perusahaan</a>
                                <a href="#" className="block px-3 py-2 rounded-lg hover:bg-gray-100 transition">Data & Analitik</a>
                                <a href="#" className="block px-3 py-2 rounded-lg hover:bg-gray-100 transition">Manajemen Mitra</a>
                                <a href="#" className="block px-3 py-2 rounded-lg hover:bg-gray-100 transition">Keamanan & Kepatuhan</a>
                                <a href="#" className="block px-3 py-2 rounded-lg hover:bg-gray-100 transition">Peta Jalan</a>
                            </nav>

                            <div className="mt-6 border-t pt-4">
                                <div className="text-sm font-medium text-gray-600">Prioritas Proyek</div>
                                <ul className="mt-3 space-y-2 text-sm">
                                    <li className="flex justify-between items-center p-1 bg-red-50 rounded"><span>EA: Microservices</span><span className="font-semibold text-red-600">Tinggi</span></li>
                                    <li className="flex justify-between items-center p-1 bg-red-50 rounded"><span>Data Lake & BI</span><span className="font-semibold text-red-600">Tinggi</span></li>
                                    <li className="flex justify-between items-center p-1"><span>Sistem Manajemen Mitra</span><span className="font-semibold text-yellow-600">Sedang</span></li>
                                    <li className="flex justify-between items-center p-1 bg-red-50 rounded"><span>Zero-Trust</span><span className="font-semibold text-red-600">Tinggi</span></li>
                                </ul>
                            </div>
                        </aside>

                        {/* Main content */}
                        <section className="col-span-9 space-y-6">
                            {/* KPI Cards */}
                            <div className="grid grid-cols-4 gap-4">
                                {kpiData.map(k => (
                                    <div key={k.id} className="bg-white p-5 rounded-2xl shadow-lg border-b-4 border-indigo-500 hover:shadow-xl transition duration-300">
                                        <div className="text-sm text-gray-500 font-medium">{k.title}</div>
                                        <div className="mt-3 flex flex-col justify-between">
                                            <div className={`text-3xl font-extrabold ${k.id === 2 ? 'text-green-600' : k.id === 3 ? 'text-yellow-600' : 'text-indigo-600'}`}>{k.value}</div>
                                            <div className="text-xs text-gray-400 mt-1">{k.subtitle}</div>
                                        </div>
                                        <div className="mt-3 h-1 bg-gray-200 rounded-full overflow-hidden">
                                            {/* Style untuk progress bar, menggunakan nilai KPI sebagai width, contoh '85%' */}
                                            <div className="h-full bg-indigo-600" style={{ width: k.value }} />
                                        </div>
                                    </div>
                                ))}
                            </div>

                            {/* Charts row */}
                            <div className="grid grid-cols-2 gap-6">
                                <div className="bg-white rounded-2xl p-6 shadow-lg">
                                    <div className="flex justify-between items-center mb-4">
                                        <h3 className="text-lg font-semibold text-gray-700">Permintaan Layanan (6 bln)</h3>
                                        <div className="text-sm text-gray-500">Update: Jun</div>
                                    </div>
                                    <div className="chart-container">
                                        {isRechartsLoaded ? (
                                            <ResponsiveContainer width="100%" height="100%">
                                                <LineChart data={requestsOverTime} margin={{ top: 5, right: 30, left: 20, bottom: 5 }}>
                                                    <XAxis dataKey="name" stroke="#6b7280" />
                                                    <YAxis stroke="#6b7280" tickFormatter={(value) => `${value / 1000}K`} />
                                                    <Tooltip formatter={(value) => [value.toLocaleString(), 'Requests']} />
                                                    <Line type="monotone" dataKey="requests" stroke="#4F46E5" strokeWidth={3} dot={false} activeDot={{ r: 8, fill: '#4F46E5', stroke: '#fff', strokeWidth: 2 }} />
                                                </LineChart>
                                            </ResponsiveContainer>
                                        ) : <ChartPlaceholder title="Line Chart" />}
                                    </div>
                                </div>

                                <div className="bg-white rounded-2xl p-6 shadow-lg">
                                    <div className="flex justify-between items-center mb-4">
                                        <h3 className="text-lg font-semibold text-gray-700">Insiden & Isu (Kanal)</h3>
                                        <div className="text-sm text-gray-500">Last 30 days</div>
                                    </div>
                                    <div className="mt-3 flex gap-4 items-center justify-around">
                                        <div style={{ width: 180, height: 180 }}>
                                            {isRechartsLoaded ? (
                                                <ResponsiveContainer width="100%" height="100%">
                                                    <PieChart>
                                                        <Pie data={incidentData} dataKey="value" nameKey="name" outerRadius={80} fill="#8884d8" label={({ percent }) => `${(percent * 100).toFixed(0)}%`}>
                                                            {incidentData.map((entry, index) => (
                                                                <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />
                                                            ))}
                                                        </Pie>
                                                        <Tooltip />
                                                        <Legend wrapperStyle={{ fontSize: '12px' }} />
                                                    </PieChart>
                                                </ResponsiveContainer>
                                            ) : <ChartPlaceholder title="Pie Chart" />}
                                        </div>
                                        {/* Display Data Legends/Summary */}
                                        <div className="flex-1 space-y-2">
                                            <div className="text-sm text-gray-600 font-medium">Isu Utama:</div>
                                            {incidentData.map((item, index) => (
                                                <div key={item.name} className="flex items-center text-sm">
                                                    <div className="w-2 h-2 rounded-full mr-2" style={{ backgroundColor: COLORS[index % COLORS.length] }}></div>
                                                    <span>{item.name}: {item.value}%</span>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Partner Management Table + Architecture summary */}
                            <div className="grid grid-cols-3 gap-6">
                                <div className="col-span-2 bg-white rounded-2xl p-6 shadow-lg">
                                    <div className="flex justify-between items-center mb-4">
                                        <h3 className="text-lg font-semibold text-gray-700">Manajemen Mitra — Ringkasan</h3>
                                        <div className="text-sm text-gray-500">Aktif / Onboarding</div>
                                    </div>
                                    <div className="table-container">
                                        <table className="w-full text-sm">
                                            <thead className="text-left text-gray-500 sticky top-0 bg-white">
                                                <tr>
                                                    <th className="pb-3 px-2">ID</th>
                                                    <th className="pb-3 px-2">Nama</th>
                                                    <th className="pb-3 px-2">Rating</th>
                                                    <th className="pb-3 px-2">Kota</th>
                                                    <th className="pb-3 px-2">Status</th>
                                                    <th className="pb-3 px-2">Aksi</th>
                                                </tr>
                                            </thead>
                                            <tbody className="text-gray-700 divide-y divide-gray-100">
                                                {partnerData.map(p => (
                                                    <tr key={p.id}>
                                                        <td className="py-3 px-2 font-mono">{p.id}</td>
                                                        <td className="py-3 px-2">{p.name}</td>
                                                        <td className="py-3 px-2"><StarRating rating={p.rating} /></td>
                                                        <td className="py-3 px-2">{p.city}</td>
                                                        <td className="py-3 px-2">
                                                            <span className={`inline-block px-2 py-0.5 text-xs rounded-full font-medium ${p.status === 'Aktif' ? 'bg-green-100 text-green-700' : 'bg-yellow-100 text-yellow-700'}`}>
                                                                {p.status}
                                                            </span>
                                                        </td>
                                                        <td className="py-3 px-2">
                                                            <button className="px-3 py-1 text-xs border border-indigo-400 text-indigo-600 rounded-lg hover:bg-indigo-50 transition">Detail</button>
                                                        </td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <div className="bg-white rounded-2xl p-6 shadow-lg">
                                    <h3 className="text-lg font-semibold text-gray-700 mb-4">Arsitektur Sistem (Ringkas)</h3>
                                    <ul className="mt-3 text-sm text-gray-600 space-y-3">
                                        <li><span class="font-bold text-indigo-600">•</span> Microservices per layanan (GoRide, GoFood, GoPay)</li>
                                        <li><span class="font-bold text-indigo-600">•</span> API Gateway & Auth Service (Zero-Trust)</li>
                                        <li><span class="font-bold text-indigo-600">•</span> Data Lake terpusat + BI Dashboard</li>
                                        <li><span class="font-bold text-indigo-600">•</span> Partner Management System (PMS) terpadu</li>
                                        <li><span class="font-bold text-indigo-600">•</span> Observability: Metrics, Tracing, Alerting</li>
                                    </ul>
                                    <div className="mt-6 pt-4 border-t">
                                        <div className="text-xs text-gray-500">Target Selanjutnya (Q4)</div>
                                        <div className="mt-2 text-sm font-bold text-indigo-600">PoC: Data Lake & Prediksi Permintaan</div>
                                        <div className="mt-1 text-sm text-gray-400">Estimasi 3 bulan</div>
                                    </div>
                                </div>
                            </div>

                            {/* Roadmap row */}
                            <div className="bg-white rounded-2xl p-6 shadow-lg">
                                <div className="flex justify-between items-center mb-4">
                                    <h3 className="text-lg font-semibold text-gray-700">Peta Jalan & Tindakan</h3>
                                    <div className="text-sm text-gray-500">Q4 — Q2 (tahun depan)</div>
                                </div>

                                <div className="mt-3 grid grid-cols-3 gap-4">
                                    <div className="p-4 border-l-4 border-indigo-500 bg-gray-50 rounded-lg shadow-sm">
                                        <div className="text-base font-bold text-indigo-700">Q4: EA & Microservices</div>
                                        <div className="text-xs text-gray-600 mt-1">Desain kontrak, gateway API, deploy layanan inti</div>
                                    </div>
                                    <div className="p-4 border-l-4 border-cyan-500 bg-gray-50 rounded-lg shadow-sm">
                                        <div className="text-base font-bold text-cyan-700">Q1: Data Lake & BI</div>
                                        <div className="text-xs text-gray-600 mt-1">Ingest data, buat dashboard, hubungkan unit</div>
                                    </div>
                                    <div className="p-4 border-l-4 border-green-500 bg-gray-50 rounded-lg shadow-sm">
                                        <div className="text-base font-bold text-green-700">Q2: Manajemen Mitra & Zero-Trust</div>
                                        <div className="text-xs text-gray-600 mt-1">Rollout PMS, privasi, penguatan keamanan</div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </main>

                    <footer className="max-w-7xl mx-auto px-4 py-6 text-xs text-gray-500 text-center border-t mt-8">
                        Prototype (data tiruan) — dikembangkan menggunakan React, Recharts, dan Tailwind CSS.
                    </footer>
                </div>
            );
        }

        // Fungsi inisialisasi menggunakan pola React 18 createRoot
        (function renderApp() {
            const container = document.getElementById('root');
            const initialLoading = document.getElementById('initial-loading');
            
            if (!container) {
                 console.error("ERROR: Elemen 'root' tidak ditemukan.");
                 return;
            }

            // Render komponen React utama
            try {
                // Gunakan createRoot untuk React 18
                const root = ReactDOM.createRoot(container);
                root.render(<GojekSiTiPrototype />);
                
                // Hapus pesan loading setelah render berhasil
                if (initialLoading) {
                    initialLoading.remove();
                }
                
                console.log("SUCCESS: Dashboard penuh berhasil dirender.");
            } catch (error) {
                console.error("ERROR: Gagal merender komponen React (Kemungkinan error Babel/JSX):", error);
                if (container) {
                    container.innerHTML = `<div class="p-8 text-center text-red-600 text-lg bg-red-50 rounded-xl max-w-xl mx-auto mt-20 border border-red-300">
                        ⚠️ ERROR Rendering Dashboard. Cek konsol (F12) untuk detail Babel/JSX error.
                    </div>`;
                }
            }
        })();
    </script>
</body>
</html>
