import React from 'react';
import { LineChart, Line, XAxis, YAxis, Tooltip, ResponsiveContainer, BarChart, Bar, PieChart, Pie, Cell, Legend } from 'recharts';

// Default export React component – single-file prototype dashboard
// Tailwind CSS classes are used for layout and styling (no external CSS required here).

const kpiData = [
  { id: 1, title: 'Integrasi Layanan', value: '85%', subtitle: 'Unit terhubung ke dashboard' },
  { id: 2, title: 'Downtime Bulanan', value: '0.7%', subtitle: 'Target < 1%' },
  { id: 3, title: 'Akurasi Prediksi', value: '72%', subtitle: 'Target ≥ 20% improvement' },
  { id: 4, title: 'Kepuasan Mitra', value: '78%', subtitle: 'Survei NPS' },
];

const requestsOverTime = [
  { name: 'Jan', requests: 12000 },
  { name: 'Feb', requests: 14500 },
  { name: 'Mar', requests: 16000 },
  { name: 'Apr', requests: 20000 },
  { name: 'May', requests: 22000 },
  { name: 'Jun', requests: 24000 },
];

const partnerData = [
  { id: 'D-001', name: 'Budi', rating: 4.8, city: 'Jakarta', status: 'Aktif' },
  { id: 'D-002', name: 'Sari', rating: 4.6, city: 'Bandung', status: 'Aktif' },
  { id: 'D-003', name: 'Andi', rating: 3.9, city: 'Surabaya', status: 'Onboarding' },
  { id: 'D-004', name: 'Ratna', rating: 4.2, city: 'Semarang', status: 'Aktif' },
];

const incidentData = [
  { name: 'Auth', value: 45 },
  { name: 'Payments', value: 25 },
  { name: 'API Gateway', value: 20 },
  { name: 'Other', value: 10 },
];

const COLORS = ['#4F46E5', '#06B6D4', '#10B981', '#F59E0B'];

export default function GojekSiTiPrototype() {
  return (
    <div className="min-h-screen bg-gray-50 text-gray-800 font-sans">
      <header className="bg-white shadow-sm sticky top-0 z-30">
        <div className="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
          <div className="flex items-center gap-3">
            <div className="w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-600 to-cyan-500 flex items-center justify-center text-white font-bold">GJ</div>
            <div>
              <h1 className="text-lg font-semibold">Gojek — SI/TI Strategy Dashboard (B-Vissta Prototype)</h1>
              <p className="text-sm text-gray-500">Overview • Enterprise Architecture • Data & Analytics • Partner Management</p>
            </div>
          </div>
          <div className="flex items-center gap-4">
            <div className="text-sm text-gray-600">Admin • Alfina</div>
            <button className="px-3 py-1 bg-indigo-600 text-white rounded-md text-sm">Export</button>
          </div>
        </div>
      </header>

      <main className="max-w-7xl mx-auto px-4 py-6 grid grid-cols-12 gap-6">
        {/* Sidebar */}
        <aside className="col-span-3 bg-white rounded-2xl p-4 shadow-sm h-fit">
          <nav className="space-y-2">
            <div className="font-semibold text-gray-700 mb-2">Navigation</div>
            <a className="block px-3 py-2 rounded-lg hover:bg-gray-50">Dashboard</a>
            <a className="block px-3 py-2 rounded-lg hover:bg-gray-50">Enterprise Architecture</a>
            <a className="block px-3 py-2 rounded-lg hover:bg-gray-50">Data & Analytics</a>
            <a className="block px-3 py-2 rounded-lg hover:bg-gray-50">Partner Mgmt</a>
            <a className="block px-3 py-2 rounded-lg hover:bg-gray-50">Security & Compliance</a>
            <a className="block px-3 py-2 rounded-lg hover:bg-gray-50">Roadmap</a>
          </nav>

          <div className="mt-6">
            <div className="text-sm font-medium text-gray-600">Project Priority</div>
            <ul className="mt-3 space-y-2 text-sm">
              <li className="flex justify-between"><span>EA: Microservices</span><span className="font-semibold">High</span></li>
              <li className="flex justify-between"><span>Data Lake & BI</span><span className="font-semibold">High</span></li>
              <li className="flex justify-between"><span>Partner Mgmt System</span><span className="font-semibold">Medium</span></li>
              <li className="flex justify-between"><span>Zero-Trust</span><span className="font-semibold">High</span></li>
            </ul>
          </div>
        </aside>

        {/* Main content */}
        <section className="col-span-9 space-y-6">
          {/* KPI Cards */}
          <div className="grid grid-cols-4 gap-4">
            {kpiData.map(k => (
              <div key={k.id} className="bg-white p-4 rounded-2xl shadow-sm">
                <div className="text-xs text-gray-500">{k.title}</div>
                <div className="mt-2 flex items-baseline justify-between">
                  <div className="text-2xl font-bold">{k.value}</div>
                  <div className="text-sm text-gray-400">{k.subtitle}</div>
                </div>
                <div className="mt-3 h-1 bg-gray-100 rounded-full overflow-hidden">
                  <div className="h-full bg-indigo-600" style={{ width: k.value }} />
                </div>
              </div>
            ))}
          </div>

          {/* Charts row */}
          <div className="grid grid-cols-2 gap-4">
            <div className="bg-white rounded-2xl p-4 shadow-sm">
              <div className="flex justify-between items-center">
                <h3 className="font-semibold">Permintaan Layanan (6 bln)</h3>
                <div className="text-sm text-gray-500">Update: Jun</div>
              </div>
              <div style={{ height: 220 }} className="mt-3">
                <ResponsiveContainer width="100%" height="100%">
                  <LineChart data={requestsOverTime}>
                    <XAxis dataKey="name" />
                    <YAxis />
                    <Tooltip />
                    <Line type="monotone" dataKey="requests" stroke="#4F46E5" strokeWidth={3} dot={false} />
                  </LineChart>
                </ResponsiveContainer>
              </div>
            </div>

            <div className="bg-white rounded-2xl p-4 shadow-sm">
              <div className="flex justify-between items-center">
                <h3 className="font-semibold">Insiden & Isu (Kanal)</h3>
                <div className="text-sm text-gray-500">Last 30 days</div>
              </div>
              <div className="mt-3 flex gap-4 items-center">
                <div style={{ width: 180, height: 180 }}>
                  <ResponsiveContainer width="100%" height={180}>
                    <PieChart>
                      <Pie data={incidentData} dataKey="value" nameKey="name" outerRadius={60} label>
                        {incidentData.map((entry, index) => (
                          <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />
                        ))}
                      </Pie>
                      <Legend />
                    </PieChart>
                  </ResponsiveContainer>
                </div>
                <div className="flex-1">
                  <div className="text-sm text-gray-600">Top issues: Auth, Payments, API Gateway</div>
                  <div className="mt-4">
                    <BarChart width={250} height={100} data={incidentData}>
                      <XAxis dataKey="name" hide />
                      <YAxis hide />
                      <Tooltip />
                      <Bar dataKey="value">
                        {incidentData.map((entry, index) => (
                          <Cell key={`cell2-${index}`} fill={COLORS[index % COLORS.length]} />
                        ))}
                      </Bar>
                    </BarChart>
                  </div>
                </div>
              </div>
            </div>
          </div>

          {/* Partner Management Table + Architecture summary */}
          <div className="grid grid-cols-3 gap-4">
            <div className="col-span-2 bg-white rounded-2xl p-4 shadow-sm">
              <div className="flex justify-between items-center">
                <h3 className="font-semibold">Partner Management — Ringkasan Mitra</h3>
                <div className="text-sm text-gray-500">Active / Onboarding</div>
              </div>
              <div className="mt-3 overflow-x-auto">
                <table className="w-full text-sm">
                  <thead className="text-left text-gray-500">
                    <tr>
                      <th className="pb-2">ID</th>
                      <th className="pb-2">Nama</th>
                      <th className="pb-2">Rating</th>
                      <th className="pb-2">Kota</th>
                      <th className="pb-2">Status</th>
                      <th className="pb-2">Aksi</th>
                    </tr>
                  </thead>
                  <tbody className="text-gray-700">
                    {partnerData.map(p => (
                      <tr key={p.id} className="border-t">
                        <td className="py-3">{p.id}</td>
                        <td className="py-3">{p.name}</td>
                        <td className="py-3">{p.rating}</td>
                        <td className="py-3">{p.city}</td>
                        <td className="py-3">{p.status}</td>
                        <td className="py-3">
                          <div className="flex gap-2">
                            <button className="px-2 py-1 text-xs border rounded">Detail</button>
                            <button className="px-2 py-1 text-xs bg-indigo-600 text-white rounded">Message</button>
                          </div>
                        </td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            </div>

            <div className="bg-white rounded-2xl p-4 shadow-sm">
              <h3 className="font-semibold">Arsitektur Sistem (Ringkas)</h3>
              <ul className="mt-3 text-sm text-gray-600 space-y-2">
                <li>• Microservices per layanan (GoRide, GoFood, GoPay)</li>
                <li>• API Gateway & Auth Service (Zero-Trust)</li>
                <li>• Data Lake terpusat + BI Dashboard</li>
                <li>• Partner Management System (PMS) terpadu</li>
                <li>• Observability: Metrics, Tracing, Alerting</li>
              </ul>
              <div className="mt-4">
                <div className="text-xs text-gray-500">Next milestone</div>
                <div className="mt-2 text-sm font-medium">Proof-of-Concept: Data Lake & Demand Forecasting</div>
                <div className="mt-2 text-sm text-gray-400">Est. 3 months</div>
              </div>
            </div>
          </div>

          {/* Roadmap and Action Items */}
          <div className="bg-white rounded-2xl p-4 shadow-sm">
            <div className="flex justify-between items-center">
              <h3 className="font-semibold">Roadmap & Action Items</h3>
              <div className="text-sm text-gray-500">Q4 — Q2 (next year)</div>
            </div>

            <div className="mt-3 grid grid-cols-3 gap-4">
              <div className="p-3 border rounded">
                <div className="text-sm font-semibold">Q4: EA & Microservices</div>
                <div className="text-xs text-gray-500 mt-1">Design contracts, API gateway, deploy core services</div>
              </div>
              <div className="p-3 border rounded">
                <div className="text-sm font-semibold">Q1: Data Lake & BI</div>
                <div className="text-xs text-gray-500 mt-1">Ingest, build dashboards, connect units</div>
              </div>
              <div className="p-3 border rounded">
                <div className="text-sm font-semibold">Q2: Partner Mgmt & Zero-Trust</div>
                <div className="text-xs text-gray-500 mt-1">Rollout PMS, privacy, security hardening</div>
              </div>
            </div>

          </div>
        </section>
      </main>

      <footer className="max-w-7xl mx-auto px-4 py-6 text-xs text-gray-500">
        Prototype (mock data) — use as basis for UI/UX and functional requirements. Developed for class assignment: B-Vissta Planning.
      </footer>
    </div>
  );
}
